# Trabalho 5 (T5) ‚Äì Gera√ß√£o de C√≥digo II (Peso: 60% da M3)

### Apresenta√ß√£o em: 03/12/2025

### Requisitos

Realizar a gera√ß√£o de c√≥digo do programa usando o conjunto de instru√ß√µes do
processador BIP. As seguintes instru√ß√µes devem ter seu c√≥digo gerado:

- [x] (1 ponto) Suporte a opera√ß√µes relacionais
- [x] (1 ponto) Desvio condicional simples (sem else)
- [x] (1,5 ponto) Desvio condicional composto (com else)
- [x] (1 ponto) La√ßo de repeti√ß√£o com teste l√≥gico no inicio (while)
- [x] (1 ponto) La√ßo de repeti√ß√£o com teste l√≥gico no fim (do..while)
- [x] (2,5 ponto) La√ßo de repeti√ß√£o com vari√°vel de controle (for)
- [x] (2 pontos) Suporte para aninhamentos (ex: la√ßo dentro de la√ßo, desvio
dentro de la√ßo, etc...);




# üîó Anota√ß√µes sobre o trabalho: 

#### No BIP todos os relacionais se faz utilizando subtra√ß√£o:

- a < b // **1 - 2 = -1** -> se o resultado for negativo, √© verdadeiro
- a > b // **2 - 1 = 1** -> se o resultado for positivo, √© verdadeiro
- a >= b // **1 - 2 = -1** -> se for 0 ou n√£o for negativo, √© verdadeiro.
- a <= b // **1 - 2 = -1** -> se for 0 ou for negativo, √© verdadeiro.
- a != b // **1 - 2 = -1** -> se for diferente de 0, verdadeiro
- a == b // **1 - 1 = 0** -> se for igual a 0, verdadeiro

#### As opera√ß√µes de compra√ß√£o, n√£o precisa aceitar operadore l√≥gicos (AND, OR, NOT) dentro das express√µes relacionais.
 - Deve ser considerador apenas express√µes simples, como por exemplo:
    Exemplo correto: a < b, a > b, a != b ....
  - Exemplo incorreto: a < b && c > d, a == b || c != d ...
---

#### Considerando que estamos resolvendo a express√£o dentro do if (a < b)

```
if(a < b){
}
``` 

#### O C√≥digo BIP a ser gerado vai ser:

```
// precisa ser salvo em temporaria por causa de opera√ß√µes com vetores (a[i] < b), ent√£o vamos padronizar sempre usar temporarios

LD a
STO 1000 // salva no temporario o "a"
LD b
STO 1001 // salva no temporario o "b"
LD 1000
SUB 1001
```

#### caso for opera√ß√µes que envolvam vetores:

```
if(a[x] < b){

}
```
#### O C√≥digo BIP a ser gerado vai ser:

```
LD x
STO $indr
LDV a
STO 1000 // salva no temporario o "a"
LD b
STO 1001 // salva no temporario o "b"
LD 1000
SUB 1001
```

> ### Essa estrutura √© a mesma independente do operador `> < <= >= != ==`

---

### resolvendo a express√£o contida dentro do if, agora deveremos adicionar a logica de "pulo" em codigo do BIP:

```
var a: int;
a = 10;

if(a < 5){
  print(a);
}

print(10);
```

#### O C√≥digo BIP a ser gerado vai ser:

```
  LDI  10
  STO A
  LD A
  SUBI 5
  BGE R1
  LD A
  STO $OUT_PORT
R1:
  LDI 10
  STO $OUT_PORT
```
> - R1 √© um r√≥tulo para sabermos aonde vamos pular caso n√£o entre no IF, vamos definir ele aonde fica o fecha "}" do escopo
> - a condi√ß√£o de salto √© uma opera√ß√£o que √© o inverso da express√£o. nesse caso BGE (salta se maior ou igual a X)

- `<` -> BGE (salta se maior ou igual a X)
- `>` -> BLE (salta se menor ou igual a X)
- `<=` -> BGT (salta se maior que X)
- `>=` -> BLT (salta se menor que X)
- `==` -> BNE (salta se n√£o for igual a X)
- `!=` -> BEQ (salta se for igual a X)

> ### Tudo que envolve r√≥tulos, deve ser tratado no c√≥digo atrav√©s de uma pilha, para garantir que em casos de IFs aninhados, os r√≥tulos n√£o se misturem.
---

### Agora considerando o uso do ELSE

```
if(a > b){
  b = a;
} else {
  a = 0;
}
```

#### O C√≥digo BIP a ser gerado vai ser:

```
  LD a
  STO 1000 // salva no temporario o "a"
  LD b
  STO 1001 // salva no temporario o "b"
  LD 1000
  SUB 1001
  BLE R1
  LD a
  STO b
  JMP R2
R1:
  LDI 0
  STO a
R2:
  ...codigo continua
```

---

### La√ßo de repeti√ß√£o WHILE

```
while (a === b){
  x = 5;
}
```

#### O C√≥digo BIP a ser gerado vai ser:

```
R1:
  LD a
  STO 1000 // salva no temporario o "a"
  LD b
  STO 1001 // salva no temporario o "b"
  LD 1000
  SUB 1001
  BNE R2
  LDI 5
  STO x
  JMP R1
R2:
  ...codigo continua
```
---

### La√ßo de repeti√ß√£o DO WHILE

```
do {
  a = b;
} while (x < 1);
```

#### O C√≥digo BIP a ser gerado vai ser:

```
R1:
  LD x
  STO 1000 // salva no temporario o "x"
  LDI 1
  STO 1001 // salva no temporario o "1"
  LD 1000
  SUB 1001
  BLT R1 // como o salto √© para uma posi√ß√£o anterior, a l√≥gica n√£o precisa ser invertida
  ...codigo continua
```
---

### La√ßo de repeti√ß√£o FOR

```
// Da forma que esta, podemos re-aproveitar o c√≥digo do WHILE
for(let i: int = 0; a < b; i++){

}
```

#### O C√≥digo BIP a ser gerado vai ser:

```
  // a 1¬∞ diferen√ßa √© a atribui√ß√£o do for que acontece uma unica vez i=0
  LDI 0
  STO I
R1:
  LD a
  STO 1000 // salva no temporario o "a"
  LD b
  STO 1001 // salva no temporario o "b"
  LD 1000
  SUB 1001
  BGE R2
  ...codigo do for

  // incremento do for
  LD I
  ADDI 1
  STO I
  JMP R1
R2:
  ...codigo continua
```
--- 